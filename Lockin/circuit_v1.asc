Version 4
SHEET 1 1696 756
WIRE -832 -336 -976 -336
WIRE -704 -336 -768 -336
WIRE 0 -288 0 -304
WIRE -272 -224 -320 -224
WIRE -128 -224 -192 -224
WIRE -976 -208 -976 -336
WIRE -848 -208 -976 -208
WIRE -704 -208 -704 -336
WIRE -704 -208 -768 -208
WIRE 400 -208 0 -208
WIRE 352 -192 80 -192
WIRE -816 -128 -848 -128
WIRE -816 -112 -816 -128
WIRE -240 -112 -288 -112
WIRE 304 -112 112 -112
WIRE -720 -96 -720 -128
WIRE -656 -96 -720 -96
WIRE -240 -96 -240 -112
WIRE -160 -64 -160 -96
WIRE -80 -64 -160 -64
WIRE 432 -64 432 -80
WIRE 512 -64 432 -64
WIRE 1120 -48 928 -48
WIRE 1248 -48 1184 -48
WIRE -720 -32 -720 -96
WIRE -720 -32 -768 -32
WIRE 512 -32 512 -64
WIRE -848 -16 -848 -128
WIRE -832 -16 -848 -16
WIRE -160 -16 -160 -64
WIRE -160 -16 -208 -16
WIRE 384 -16 256 -16
WIRE -720 0 -768 0
WIRE -288 0 -288 -112
WIRE -272 0 -288 0
WIRE 384 0 384 -16
WIRE -976 16 -976 -208
WIRE -976 16 -1040 16
WIRE -944 16 -976 16
WIRE -896 16 -944 16
WIRE -832 16 -896 16
WIRE -160 16 -208 16
WIRE 80 16 80 -192
WIRE 160 16 80 16
WIRE 352 16 352 -192
WIRE 352 16 256 16
WIRE -944 32 -944 16
WIRE -704 32 -704 -208
WIRE -704 32 -768 32
WIRE -640 32 -704 32
WIRE -576 32 -640 32
WIRE -416 32 -512 32
WIRE -320 32 -320 -224
WIRE -320 32 -336 32
WIRE -272 32 -320 32
WIRE -128 48 -128 -224
WIRE -128 48 -208 48
WIRE -32 48 -128 48
WIRE 112 48 112 -112
WIRE 112 48 -32 48
WIRE 160 48 112 48
WIRE 304 48 304 -112
WIRE 304 48 256 48
WIRE -720 64 -720 0
WIRE -656 64 -720 64
WIRE 816 64 816 0
WIRE 816 64 768 64
WIRE 320 80 256 80
WIRE 480 80 320 80
WIRE 560 80 480 80
WIRE 656 80 640 80
WIRE 704 80 656 80
WIRE 1312 80 1312 32
WIRE 1312 80 1216 80
WIRE -160 96 -160 16
WIRE -80 96 -160 96
WIRE 784 96 768 96
WIRE 1088 96 1072 96
WIRE 1152 96 1088 96
WIRE 80 112 80 16
WIRE 160 112 80 112
WIRE 400 112 400 -208
WIRE 400 112 256 112
WIRE 704 112 688 112
WIRE 1312 112 1216 112
WIRE -1040 128 -1040 96
WIRE -944 128 -944 112
WIRE -896 128 -896 80
WIRE -896 128 -944 128
WIRE -160 128 -160 96
WIRE 656 128 656 80
WIRE 800 128 768 128
WIRE 816 128 800 128
WIRE 928 128 928 -48
WIRE 928 128 896 128
WIRE 960 128 928 128
WIRE 1072 128 1072 96
WIRE 1072 128 1040 128
WIRE 1152 128 1136 128
WIRE -944 144 -944 128
WIRE -720 144 -720 64
WIRE 160 144 96 144
WIRE 432 144 432 -64
WIRE 432 144 256 144
WIRE 1248 144 1248 -48
WIRE 1248 144 1216 144
WIRE 1344 144 1248 144
WIRE 1424 144 1344 144
WIRE 160 176 16 176
WIRE 432 176 256 176
WIRE 1088 176 1088 96
WIRE 432 192 432 176
WIRE 512 192 432 192
WIRE 160 208 -48 208
WIRE 320 208 320 80
WIRE 320 208 256 208
WIRE 688 208 688 112
WIRE 800 208 800 128
WIRE 800 208 688 208
WIRE 512 224 512 192
WIRE 656 224 656 192
WIRE 1136 224 1136 128
WIRE 1248 224 1248 144
WIRE 1248 224 1136 224
WIRE -272 240 -272 208
WIRE 16 256 16 176
WIRE 1312 256 1312 112
WIRE 432 272 432 192
WIRE -512 288 -512 240
WIRE 784 288 784 96
WIRE 96 304 96 144
WIRE -272 336 -272 320
WIRE -48 336 -48 208
WIRE -48 336 -272 336
WIRE -272 352 -272 336
WIRE 16 384 16 336
WIRE -512 400 -512 368
WIRE -384 400 -512 400
WIRE -512 416 -512 400
WIRE -384 416 -384 400
WIRE -272 512 -272 432
WIRE -512 544 -512 496
FLAG -384 416 0
FLAG -512 240 Vdd
IOPIN -512 240 In
FLAG -512 544 Vss
IOPIN -512 544 In
FLAG -720 144 Vss
IOPIN -720 144 In
FLAG -720 -128 Vdd
IOPIN -720 -128 In
FLAG -816 -112 0
FLAG -944 144 0
FLAG -656 -32 0
FLAG -656 128 0
FLAG -160 -96 Vdd
IOPIN -160 -96 In
FLAG -160 128 Vss
IOPIN -160 128 In
FLAG -80 0 0
FLAG -80 160 0
FLAG -240 -96 0
FLAG 96 304 0
FLAG 16 384 0
FLAG 432 272 Vss
IOPIN 432 272 In
FLAG 432 -80 Vdd
IOPIN 432 -80 In
FLAG 512 32 0
FLAG 512 288 0
FLAG 384 0 0
FLAG -272 208 Vdd
IOPIN -272 208 In
FLAG -272 512 0
FLAG 0 -304 Vdd
IOPIN 0 -304 In
FLAG -1040 128 0
FLAG 656 224 0
FLAG 1088 240 0
FLAG 1312 32 Vdd
IOPIN 1312 32 In
FLAG 816 0 Vdd
IOPIN 816 0 In
FLAG 784 288 Vss
IOPIN 784 288 In
FLAG 1312 256 Vss
IOPIN 1312 256 In
FLAG 1424 144 out
IOPIN 1424 144 Out
FLAG -640 32 TIA_op
FLAG -32 48 Vtg_amp_op
FLAG 480 80 multiplier_op
FLAG 1344 144 filter_op
SYMBOL voltage -512 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=200
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage -512 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=200
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL res -752 -224 R90
WINDOW 0 2 39 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL cap -768 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10.4p
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL AutoGenerated\\TL081 -800 0 R0
SYMATTR InstName U1
SYMBOL res -960 16 R0
WINDOW 0 -2 17 Left 2
WINDOW 3 -17 102 Left 2
SYMATTR InstName R2
SYMATTR Value 50Meg
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL cap -672 -96 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL cap -672 64 R0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL AutoGenerated\\TL081 -240 16 R0
SYMATTR InstName U2
SYMBOL res -320 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2.2k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL res -176 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 24 49 VTop 2
SYMATTR InstName R4
SYMATTR Value 220k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL cap -96 -64 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL cap -96 96 R0
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL AutoGenerated\\AD630 208 96 R0
SYMATTR InstName U3
SYMBOL voltage 16 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0 1p 1p 0.02m 0.2m)
SYMBOL cap 496 -32 R0
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL cap 496 224 R0
SYMATTR InstName C7
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL res -288 224 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL res -288 336 R0
SYMATTR InstName R6
SYMATTR Value 1.2k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL res -16 -304 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL cap -912 16 R0
SYMATTR InstName C8
SYMATTR Value 588p
SYMBOL current -1040 96 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 24 -28 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0 10n 0 1p 1p 0.02m 0.2m)
SYMATTR Value2 AC 10n
SYMBOL res 656 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 72k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL AutoGenerated\\TL081 736 96 R0
SYMATTR InstName U4
SYMBOL AutoGenerated\\TL081 1184 112 R0
SYMATTR InstName U5
SYMBOL res 912 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 72k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL res 1056 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 72k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL cap 640 128 R0
SYMATTR InstName C10
SYMATTR Value 0.01µ
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL cap 1072 176 R0
SYMATTR InstName C11
SYMATTR Value 2n
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL cap 1184 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 20n
SYMATTR SpiceLine V=50 Rser=0.1
SYMBOL cap -512 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 482.2n
SYMATTR SpiceLine V=50 Rser=0.1
TEXT -1056 360 Left 2 !;ac oct 100 1 10meg
TEXT -1056 392 Left 2 !.optionz cshunt = 1e-15
TEXT -968 -416 Left 2 ;Transimpedance amplifier
TEXT -328 -312 Left 2 ;AC voltage gain amplifier
TEXT 128 -280 Left 2 ;Demodulator
TEXT 736 -128 Left 2 ;Low pass filter
TEXT -1056 424 Left 2 !.tran 0 30m 0 5u
TEXT -1064 456 Left 2 !;.noise V(multiplier_op) I1 oct 100 1 10meg
TEXT -1056 488 Left 2 !;.step param x list 1p 2p 3p 4p 5p 7p 8p 10p
